# Docker Environment Configuration for Battery Hawk
# Copy this file to .env and customize for your deployment

# =============================================================================
# API Configuration
# =============================================================================
API_PORT=5000
LOG_LEVEL=INFO

# =============================================================================
# Logging Configuration
# =============================================================================
# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
BATTERYHAWK_SYSTEM_LOGGING_LEVEL=INFO

# Log file path (optional, logs to console if not set)
BATTERYHAWK_SYSTEM_LOGGING_FILE=/logs/battery_hawk.log

# Log format with timestamps
BATTERYHAWK_SYSTEM_LOGGING_FORMAT="%(asctime)s - %(name)s - %(levelname)s - %(message)s"

# Timestamp format
BATTERYHAWK_SYSTEM_LOGGING_DATE_FORMAT="%Y-%m-%d %H:%M:%S"

# Log file rotation settings
BATTERYHAWK_SYSTEM_LOGGING_MAX_BYTES=10485760  # 10MB
BATTERYHAWK_SYSTEM_LOGGING_BACKUP_COUNT=5

# =============================================================================
# InfluxDB Configuration
# =============================================================================
INFLUXDB_HOST=influxdb
INFLUXDB_PORT=8086
INFLUXDB_DATABASE=battery_hawk

# InfluxDB 1.x settings (current)
INFLUXDB_USERNAME=admin
INFLUXDB_PASSWORD=changeme_influxdb_password

# InfluxDB 2.x settings (for production)
INFLUXDB_ADMIN_USER=admin
INFLUXDB_ADMIN_PASSWORD=changeme_influxdb_admin_password
INFLUXDB_ORG=battery-hawk
INFLUXDB_BUCKET=battery_hawk
INFLUXDB_RETENTION=30d
INFLUXDB_TOKEN=changeme_influxdb_token

# =============================================================================
# MQTT Configuration
# =============================================================================
MQTT_BROKER=mqtt-broker
MQTT_PORT=1883
MQTT_USERNAME=
MQTT_PASSWORD=
MQTT_TOPIC_PREFIX=battery_hawk
MQTT_TLS=false

# =============================================================================
# Security Configuration
# =============================================================================
# Generate with: openssl rand -hex 32
API_KEY=changeme_api_key_32_characters_long

# =============================================================================
# Bluetooth Configuration
# =============================================================================
BLUETOOTH_MAX_CONNECTIONS=5
BLUETOOTH_SCAN_DURATION=10

# =============================================================================
# Docker-specific Configuration
# =============================================================================
# User ID mapping for file permissions
MAP_UID=1000
MAP_GID=1000
UMASK=022

# Container resource limits
BATTERY_HAWK_MEMORY_LIMIT=512M
BATTERY_HAWK_CPU_LIMIT=1.0
INFLUXDB_MEMORY_LIMIT=1G
INFLUXDB_CPU_LIMIT=1.0
MQTT_MEMORY_LIMIT=256M
MQTT_CPU_LIMIT=0.5

# =============================================================================
# Port Configuration
# =============================================================================
# Host ports for service access (only used in development/bridge mode)
API_HOST_PORT=5000
INFLUXDB_HOST_PORT=8086
MQTT_HOST_PORT=1883
MQTT_WEBSOCKET_HOST_PORT=9001
ADMINER_HOST_PORT=8080
NGINX_HTTP_HOST_PORT=80
NGINX_HTTPS_HOST_PORT=443

# =============================================================================
# Network Configuration
# =============================================================================
# Set to 'bridge' for production with reverse proxy
# Set to 'host' for development or direct access (required for BLE)
NETWORK_MODE=host

# =============================================================================
# Volume Configuration
# =============================================================================
# Data persistence paths
DATA_PATH=./local-instance/data
CONFIG_PATH=./local-instance/config
LOGS_PATH=./local-instance/logs
INFLUXDB_DATA_PATH=./local-instance/influxdb-data
MOSQUITTO_CONFIG_PATH=./local-instance/mosquitto/config
MOSQUITTO_DATA_PATH=./local-instance/mosquitto/data
MOSQUITTO_LOG_PATH=./local-instance/mosquitto/log

# =============================================================================
# Development Settings
# =============================================================================
# Set to 'true' for development mode
DEVELOPMENT_MODE=false

# Enable test mode for Bluetooth (no real BLE required)
BLUETOOTH_TEST_MODE=false

# =============================================================================
# Monitoring and Health Checks
# =============================================================================
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=40s

# =============================================================================
# Backup Configuration
# =============================================================================
BACKUP_ENABLED=false
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=./backups
